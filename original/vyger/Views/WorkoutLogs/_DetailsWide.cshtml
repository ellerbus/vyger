@model WorkoutLogDetailViewModel

@using (Html.BeginForm())
{
  @Html.AntiForgeryToken()
  @Html.ValidationSummary()
  <div class="form-group">
    <h3>
      @if (Model.CanChangeDate)
      {
        <span class="btn-group float-right">
          <a class="btn btn-outline-secondary"
             href="@Url.Action("Plans", Model.GetPlanRouteValues(Model.LogDate.AddDays(-1)))">
            <i class="fa fa-chevron-left"></i>
          </a>
          <a class="btn btn-outline-secondary"
             href="@Url.Action("Plans", Model.GetPlanRouteValues(Model.LogDate.AddDays(1)))">
            <i class="fa fa-chevron-right"></i>
          </a>
        </span>
      }
      @Model.LogDate.ToString("dddd - MMMM d, yyyy")
    </h3>
  </div>
  <table class="table table-sortable view-wide">
    <thead>
      <tr>
        <th style="width: 16px;"></th>
        <th style="width: 200px">Exercise</th>
        <th style="width: 24px;"></th>
        <th>Workout</th>
      </tr>
    </thead>
    @if (Model.Logs.Count() > 0)
    {
      <tbody>
        @foreach (var log in Model.Logs.OrderBy(x => x.SequenceNumber).ThenBy(x => x.Exercise.Name))
        {
          <tr>
            @using (Html.BeginFieldScope(log, "Logs"))
            {
              <td class="drag-handler"></td>
              <td style="vertical-align: middle;">
                @Html.Partial("_PrimaryKey", log)
                @log.Exercise.Category @log.Exercise.Name
              </td>
              <td class="text-center" style="vertical-align: middle;">
                <a class="pointer delete-log"
                   data-toggle="tooltip" title="Delete Exercise">
                  <i class="fa fa-fw fa-times text-danger"></i>
                </a>
              </td>
              <td>
                @Html.Partial("_Entry", log)
              </td>
            }
          </tr>
        }
      </tbody>
    }
    <tfoot>
      <tr>
        <td colspan="3" class="text-left">
          <button type="submit" class="btn btn-primary">save workout</button>
          <a href="@Url.Action("Index")" class="btn btn-outline-secondary">cancel</a>
        </td>
        <td>
          @if (!Model.CanChangeDate)
          {
            <a href="@Url.Action("Create", new { date = Model.LogDate.ToYMD() })" class="btn btn-sm btn-outline-success float-right">
              <i class="fa fa-fw fa-plus"></i> Add Exercise
            </a>
          }
        </td>
      </tr>
    </tfoot>
  </table>
}